[![platform](https://img.shields.io/badge/Platform-Windows%20%7C%20Mac%20%7C%20Android%20%7C%20IOS-red.svg)](https://github.com/open-public-cloud/lanhaha/blob/main/jx.user.js) [![Twitter](https://img.shields.io/badge/Twitter-Issue-blue?logo=twitter)](https://twitter.com/cloud0Sweet) [![Install](https://img.shields.io/badge/安装-005200)](https://github.com/open-public-cloud/lanhaha/blob/main/jx.user.js)


一个神奇的[脚本](https://github.com/open-public-cloud/lanhaha/blob/main/jx.user.js)。

- [安装TM](#安装tm)
- [安装脚本](#安装脚本)
- [使用](#使用)
    - [PC端](#pc端)
    - [移动端](#移动端)
- [常见问题](#常见问题)
- [更新日志](#更新日志)

## 安装TM

运行脚本的浏览器需要先安装TamperMonkey或同类插件

<details><summary>Windows(展开)</summary>
<p>

[Google Chrome](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-CN) (需要科学上网)

[火狐 FireFox](https://addons.mozilla.org/zh-CN/firefox/addon/tampermonkey)

[微软 EDGE](https://microsoftedge.microsoft.com/addons/detail/iikmkjmpaadaobahmlepeloendndfphd?hl=zh-CN)
</p>
</details>
<details><summary>MAC(展开)</summary>
<p>

[MAC Safari](https://apps.apple.com/cn/app/tampermonkey/id1482490089)
</p>
</details>

<details><summary>Android(展开)</summary>
<p>

X浏览器和VIA浏览器自带插件，无需安装。

[Kiwi浏览器](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-CN) (需要科学上网)

</p>
</details>

<details><summary>IOS(展开)</summary>
<p>

在 IOS 应用商店中搜索并安装 “拦截100” 或者 “stay”
</p>
</details>

<details><summary>其他浏览器(展开)</summary>
<p>

其他浏览器可在官方扩展市场搜索: “Tampermonkey”、“篡改猴”、“油猴”、“暴力猴”等脚本插件进行安装。

</p>
</details>

## 安装脚本
   
   懒人脚本**完整版**安装地址: 

   [https://github.com/open-public-cloud/lanhaha/blob/main/jx.user.js](https://github.com/open-public-cloud/lanhaha/blob/main/jx.user.js)

## 使用

#### PC端

<details><summary>脚本设置(重要)(展开)</summary>
<p>

![脚本设置](https://github.com/open-public-cloud/lanhaha/blob/main/img/jbsetup.jpg)

    浏览器打开任意视频网站，在右上角Tampermonkey中打开脚本设置。

</p>
</details>

<details><summary>观看VIP视频(展开)</summary>
<p>

![解析图标](https://github.com/open-public-cloud/lanhaha/blob/main/img/zhanwai.jpg)

    站内解析:
    1. 脚本“设置”-“解析设置”-“站外解析”调整为关闭状态
    2. 浏览任意单个视频，鼠标移动到左侧红色VIP图标上，弹出的窗口选择合适的线路点击即可在网页内播放。
   
    站外解析:
    3. 脚本“设置”-“解析设置”-“站外解析”调整为开启状态
    4. 浏览任意单个视频，鼠标移动到左侧红色VIP图标上，弹出的窗口选择合适的线路点击即可打开新页面播放。
   
    自定义线路:
    5. 脚本“设置”-“解析设置”-“解析线路”
    6. 编辑线路内容，每线路一行，线路名称和线路地址用半角逗号隔开。

</p>
</details>

<details><summary>抖音/快手/西瓜/bilibili下载(展开)</summary>
<p>

![抖音下载](https://github.com/open-public-cloud/lanhaha/blob/main/img/douyin.jpg)

    1. 在douyin.com/kuaishou.com/xigua.com/bilibili.com任意视频播放窗口的下方播放工具条找到下载按钮
    2. 选择对应的下载方式点击就可以下载
    3. 注意: 直接下载方式，越长的视频需要等待的时间越长。
    4. 注意: bilibili屏蔽了网页方式直接下载，这里可以安装IDM(Internet Download Manager)，在点击下载的同时唤醒IDM进行下载就能成功。

</p>
</details>
<details><summary>Youtube下载(展开)</summary>
<p>

    1. 鼠标移动到youtube.com任意视频播放窗口左侧红色VIP图标
    2. 选择对应的下载线路点击
    3. 在弹出的页面中点击下载。
</p>
</details>
<details><summary>知乎增强(展开)</summary>
<p>

    在脚本设置中开关相关功能。
</p>
</details>
<details><summary>购物助手(展开)</summary>
<p>

    1. 筛选仅显示淘宝: 在淘宝商品搜索页面，默认只有仅显示天猫，没有仅显示淘宝。脚本新增仅显示淘宝功能，勾选即可方便筛选商品。
    2. 显示隐藏优惠券: 淘宝、天猫、京东等商品页面立即购买上方显示隐藏优惠券。
</p>
</details>
<details><summary>音乐下载(展开)</summary>
<p>

    网易云音乐
    1. 点击任意一个音乐单曲(非歌单)
    2. 点击左侧VIP图标
    3. 在弹出的窗口中点下载。

    腾讯音乐
    1. 点击任意一个音乐单曲，点击播放
    2. 在播放页面点击左侧VIP图标
    3. 在弹出的窗口中点下载。
    
    酷狗/酷我音乐
    1. 点击任意一个音乐单曲，点击播放
    2. 在播放页面下方的进度条上找到下载按钮，点击下载。
  
    喜马拉雅
    单独下载:
    1. 点击任意一个音乐单曲，点击播放
    2. 在播放页面下方的进度条上找到下载按钮，点击下载。
    批量下载:
    1. 在音乐集的音乐列表左侧勾选需要下载的音乐
    2. 点击音乐集音乐列表右上方批量下载。
</p>
</details>

#### 移动端

<details><summary>观看VIP视频(展开)</summary>
<p>

![移动vip](https://github.com/open-public-cloud/lanhaha/blob/main/img/mobile.jpg)

    浏览任意单个视频，鼠标点击左侧红色VIP图标，在弹出的窗口选择合适的线路点击即可在网页内播放。
</p>
</details>

## 常见问题

<details><summary>安装相关(展开)</summary>
<p>

    不显示VIP图标怎么排查？
    1. 脚本只支持浏览器，不支持客户端，且只会在能起作用的页面显示。例如zhihu.com
    2. 点击浏览器右上角的Tampermonkey插件图标，查看是否为已启用状态。
    3. 点击浏览器右上角的Tampermonkey插件图标，在管理面板里关闭其他脚本，按F5刷新网页试试。
    4. 如果是360安全浏览器要切换到极速模式，另外不建议使用国产浏览器。
    5. 点击浏览器右上角的Tampermonkey插件图标，打开脚本的设置，查看图标设置是否正常，根据需要调整图标的位置并保存。
   
    safari浏览器怎么使用脚本？
    safari可以使用Tampermonkey，但是因为浏览器内核不一样，使用中可能会有问题。

    为什么我的浏览器点击安装脚本会下载一个文件，打开会提示编译错误？
    安装脚本前应该先安装Tampermonkey，点击安装脚本会自动安装到Tampermonkey里，如果已经安装Tampermonkey还出现这样的情况，重启试试，或者通过手动安装的方式安装。

    为什么已经卸载了脚本还会在视频网站左侧显示图标?
    检查该浏览器是否安装了暴力猴，Greasemonkey，AdGuard或者其他同类插件，可能是这些插件里也安装了脚本，删除这些插件里的脚本试试。

    电视上能不能用?
    正常情况不可以，有能力的可以自行研究。

    脚本弹出更新提示怎么办？
    脚本在发现新版本后会弹出更新提示。点击“忽略”则当天不会再有提示；点击“查看更新”并更新到最新版的脚本则不会再有提示。更新地址见本文最下方。

</p>
</details>

<details><summary>视频音乐相关(展开)</summary>
<p>

    为什么有的视频无法解析成功？
    脚本无法控制线路是否正常，不是所有线路100%能解析所有视频，视频无法解析属于正常情况，更换其他线路试试。另外有优质线路可以自行添加进脚本。

    为什么以前用的好好的现在不能用了？
    一般晚上用的人较多，线路会比较拥挤。另外如果大量重复点击解析，可能会被线路认为是恶意行为，造成IP被解析线路屏蔽，换其他线路或者换个IP试试。另外目前脚本支持自定义线路，个人有好的线路可自行添加。

    视频解析怎么看蓝光4K？
    视频解析的清晰度是各线路自己设置的，看不了蓝光4K。

    为什么手机看视频会有广告？
    脚本已经把手机端带广告的线路屏蔽了，但是有可能之前没广告的线路，后来又添加了广告，脚本会定期更换这部分线路。

    为什么B站视频下载打不开？
    脚本获取视频链接正常，但是B站屏蔽了浏览器直接下载视频，可以安装IDM(Internet Download Manager)，在点击下载的同时唤醒IDM进行下载就能成功。

    音乐/视频下载位置在哪？
    你的操作系统下载目录，或者浏览器单独设置文件下载目录，在浏览器设置的下载历史里可以找到文件。

    为什么有的音乐下载链接是空的？
    脚本的音乐下载功能是免客户端下载，也可以下载部分能在线听的歌曲，但无法下载收费歌曲。

    为什么下载音乐会变成播放音乐？
    因为现在的浏览器都会自动播放下载的mp3文件，复制播放音乐页面的地址，放到下载软件例如迅雷、idm中下载即可。

</p>
</details>

## 更新日志

<details><summary>日志(展开)</summary>
<p>

6.8.21
优化视频解析线路

6.8.19
优化快手下载按钮

6.8.18
优化视频解析线路

6.8.16
优化更新提示

6.8.13
修复知乎,b站,Youtube样式冲突

6.8.12
增加提醒更新内容

6.8.10
添加设置菜单foot内容
</p>
</details>

---

